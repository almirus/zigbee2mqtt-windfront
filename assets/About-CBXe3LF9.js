import{r as g,b as _,j as e,L as b,a as x,k as j,cR as N,cS as y,cT as S,cU as $,M as z,S as E,A as w,cV as R,cW as L,cX as A,aC as f}from"./index-Cg_dwqpD.js";import{s as T}from"./snakeCase-CrKq36vi.js";import"./envs-CSqIi4cL.js";import"./_createCompounder-Dcznv9Az.js";import"./isArray-uIIfUpwr.js";const U="2.2.1",k={version:U};function v({name:i,data:r}){const s=[];for(const n in r){const o=r[n];s.push(e.jsx("li",{children:e.jsxs(b,{to:"#",children:[n,": ",o]})},n))}return e.jsx("li",{children:e.jsxs("details",{children:[e.jsx("summary",{children:i}),e.jsx("ul",{children:s})]})})}const M=g.memo(i=>{const{devices:r}=i,{t:s}=_(["stats","zigbee"]),n=g.useMemo(()=>{const o={},c={},d={},m={};for(const a of r){if(a.type==="Coordinator")continue;const h=s(l=>l[a.type],{ns:"zigbee"}),t=a.model_id||s(l=>l.unknown,{ns:"zigbee"}),p=a.manufacturer||s(l=>l.unknown,{ns:"zigbee"}),u=s(l=>l[T(a.power_source||"unknown")],{ns:"zigbee"});o[h]=(o[h]||0)+1,c[u]=(c[u]||0)+1,d[t]=(d[t]||0)+1,m[p]=(m[p]||0)+1}return e.jsxs(e.Fragment,{children:[e.jsx(v,{name:s(a=>a.byType),data:o}),e.jsx(v,{name:s(a=>a.byPowerSource),data:c}),e.jsx(v,{name:s(a=>a.byModel),data:d}),e.jsx(v,{name:s(a=>a.byVendor),data:m})]})},[r,s]);return e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs(b,{to:"#",children:[s(o=>o.total)," ",r.length-1]})}),n]})}),P=g.memo(({sourceIdx:i})=>{const{t:r}=_("zigbee"),s=x(j(c=>c.bridgeInfo[i])),n=x(j(c=>c.bridgeHealth[i])),o={labels:"problem",title:"???",body:`<!-- MAKE SURE THIS IS NOT ALREADY POSTED ${f.slice(0,-4)} -->

### What happened?

### What did you expect to happen?

### How to reproduce it (minimal and precise)

### Debug logs

### Details
os: \`${s.os.version}\`
node: \`${s.os.node_version}\`
homeassistant: \`${s.config.homeassistant.enabled}\`
zigbee2mqtt: \`${s.version}\` (\`${s.commit}\`)
zigbee-herdsman: \`${s.zigbee_herdsman.version}\`
zigbee-herdsman-converters: \`${s.zigbee_herdsman_converters.version}\`
adapter: \`${s.coordinator.type}\` \`${JSON.stringify(s.coordinator.meta)}\``};return n.response_time>0&&(o.body+=`
#### Last health check
time: \`${new Date(n.response_time)}\`
os.load_average: \`${n.os.load_average.join(", ")}\`
os.memory_percent: \`${n.os.memory_percent}\`
process.memory_percent: \`${n.process.memory_percent}\`
process.uptime_sec: \`${Math.round(n.process.uptime_sec)}\`
`),e.jsx(b,{target:"_blank",rel:"noopener noreferrer",to:`${f}?${new URLSearchParams(o).toString()}`,className:"btn btn-ghost",children:r(c=>c.report_problem)})});function H({sourceIdx:i}){const{t:r}=_(["settings","common","zigbee"]),s=x(j(t=>t.bridgeInfo[i])),n=x(j(t=>t.devices[i])),c=s.version.match(/^\d+\.\d+\.\d+$/)===null?e.jsx("a",{className:"link link-hover text-secondary",target:"_blank",rel:"noopener noreferrer",href:`${N}dev/`,children:s.version}):e.jsx("a",{className:"link link-hover",target:"_blank",rel:"noopener noreferrer",href:`${y}${s.version}`,children:s.version}),d=s.commit?e.jsxs(e.Fragment,{children:["commit:"," ",e.jsx("a",{className:"link",target:"_blank",rel:"noopener noreferrer",href:`${N}${s.commit}`,children:s.commit})]}):null,m=e.jsx("a",{className:"link link-hover",target:"_blank",rel:"noopener noreferrer",href:`${A}${k.version}`,children:k.version}),a=e.jsx("a",{className:"link link-hover",target:"_blank",rel:"noopener noreferrer",href:`${S}${s.zigbee_herdsman_converters.version}`,children:s.zigbee_herdsman_converters.version}),h=e.jsx("a",{className:"link link-hover",target:"_blank",rel:"noopener noreferrer",href:`${$}${s.zigbee_herdsman.version}`,children:s.zigbee_herdsman.version});return e.jsxs("div",{className:"flex flex-col gap-3 items-center text-center w-full",children:[e.jsx(P,{sourceIdx:i}),e.jsxs("div",{className:"stats stats-vertical lg:stats-horizontal shadow",children:[z&&e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.source,{ns:"common"})}),e.jsx("div",{className:"stat-value text-xl",children:e.jsx(E,{idx:i,alwaysShowName:!0})}),e.jsx("div",{className:"stat-desc max-w-md whitespace-normal",children:w[i]})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.zigbee2mqtt_version)}),e.jsx("div",{className:"stat-value text-lg",children:c}),e.jsx("div",{className:"stat-desc",children:d})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.frontend_version)}),e.jsx("div",{className:"stat-value text-lg",children:m})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.zigbee_herdsman_converters_version)}),e.jsx("div",{className:"stat-value text-lg",children:a})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.zigbee_herdsman_version)}),e.jsx("div",{className:"stat-value text-lg",children:h})]})]}),e.jsxs("div",{className:"stats stats-vertical lg:stats-horizontal shadow",children:[e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.machine)}),e.jsx("div",{className:"stat-value text-lg max-w-md whitespace-normal",children:s.os.version}),e.jsxs("div",{className:"stat-desc",children:["CPU: ",s.os.cpus]}),e.jsxs("div",{className:"stat-desc",children:["RAM: ",s.os.memory_mb," MB"]})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.mqtt)}),e.jsx("div",{className:"stat-value text-lg",children:s.mqtt.server}),e.jsx("div",{className:"stat-desc",children:e.jsxs("a",{href:R,target:"_blank",rel:"noreferrer",className:"link link-hover",children:[r(t=>t.version),": ",s.mqtt.version]})})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.node_version)}),e.jsx("div",{className:"stat-value text-lg",children:e.jsx("a",{href:L,target:"_blank",rel:"noreferrer",className:"link link-hover",children:s.os.node_version})})]}),e.jsxs("div",{className:"stat place-items-center",children:[e.jsx("div",{className:"stat-title",children:r(t=>t.coordinator)}),e.jsx("div",{className:"stat-value text-lg",children:s.coordinator.type}),e.jsx("div",{className:"stat-desc",children:e.jsx("span",{className:"badge badge-sm badge-primary",title:r(t=>t.coordinator_ieee_address),children:s.coordinator.ieee_address})}),e.jsxs("div",{className:"stat-desc",children:[r(t=>t.revision),": ",s.coordinator.meta.revision||r(t=>t.unknown,{ns:"zigbee"})]})]})]}),e.jsx("ul",{className:"menu bg-base-100 rounded-box shadow min-w-sm",children:e.jsx("li",{children:e.jsxs("details",{open:!0,children:[e.jsx("summary",{children:r(t=>t.stats)}),e.jsx(M,{devices:n})]})})})]})}export{H as default};
